@use '@angular/material' as mat;
@use 'sass:map';

@mixin status-styles($status, $color, $hue) {
  :root {
    --#{$status}: #{get-palette-color($color, $hue)};
  }

  .#{$status} {
    $status-color: var(--#{$status});

    @include mat.card-overrides((
      elevated-container-color: $status-color,
      outlined-container-color: $status-color,
    ));

    @include mat.icon-overrides((
      color: $status-color,
    ));

    &:not(.mat-mdc-card).ongoing {
      background-color: $status-color;
      background-image: linear-gradient(
          45deg,
          rgba(255,255,255,.15) 25%,
          transparent 25%,
          transparent 50%,
          rgba(255,255,255,.15) 50%,
          rgba(255,255,255,.15) 75%,
          transparent 75%,
          transparent
      );
      transition: width 0.6s ease;
      background-size: 16px 16px;
      animation: progress-fill-stripes 1s linear infinite;

     -webkit-background-clip: text;
     background-clip: text;
     color: transparent;
    }
  }
}

@keyframes progress-fill-stripes {
  from {
    background-position: 16px 0;
  }

  to {
    background-position: 0 0;
  }
}

@function get-palette-color($palette, $hue) {
  $result: map.get($palette, $hue);
  @if not $result {
    $supported-hues: map.keys($palette);
    @error #{'Valid hues for'} $palette-name #{'are: #{$supported-hues}. Got:'} $hue;
  }
  @return $result;
}
